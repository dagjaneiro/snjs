{"code":"import * as tslib_1 from \"tslib\";\r\nimport { SFItem } from 'standard-file-js/lib/app/models/item';\r\nvar SNComponent = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SNComponent, _super);\r\n    function SNComponent(json_obj) {\r\n        var _this = this;\r\n        // If making a copy of an existing component (usually during sign in if you have a component active in the session),\r\n        // which may have window set, you may get a cross-origin exception since you'll be trying to copy the window. So we clear it here.\r\n        json_obj.window = null;\r\n        _this = _super.call(this, json_obj) || this;\r\n        if (!_this.componentData) {\r\n            _this.componentData = {};\r\n        }\r\n        if (!_this.disassociatedItemIds) {\r\n            _this.disassociatedItemIds = [];\r\n        }\r\n        if (!_this.associatedItemIds) {\r\n            _this.associatedItemIds = [];\r\n        }\r\n        return _this;\r\n    }\r\n    SNComponent.prototype.mapContentToLocalProperties = function (content) {\r\n        _super.prototype.mapContentToLocalProperties.call(this, content);\r\n        /* Legacy */\r\n        // We don't want to set the url directly, as we'd like to phase it out.\r\n        // If the content.url exists, we'll transfer it to legacy_url\r\n        // We'll only need to set this if content.hosted_url is blank, otherwise, hosted_url is the url replacement.\r\n        if (!content.hosted_url) {\r\n            this.legacy_url = content.url;\r\n        }\r\n        /* New */\r\n        this.local_url = content.local_url;\r\n        this.hosted_url = content.hosted_url || content.url;\r\n        this.offlineOnly = content.offlineOnly;\r\n        if (content.valid_until) {\r\n            this.valid_until = new Date(content.valid_until);\r\n        }\r\n        this.name = content.name;\r\n        this.autoupdateDisabled = content.autoupdateDisabled;\r\n        this.package_info = content.package_info;\r\n        // the location in the view this component is located in. Valid values are currently tags-list, note-tags, and editor-stack`\r\n        this.area = content.area;\r\n        this.permissions = content.permissions;\r\n        if (!this.permissions) {\r\n            this.permissions = [];\r\n        }\r\n        this.active = content.active;\r\n        // custom data that a component can store in itself\r\n        this.componentData = content.componentData || {};\r\n        // items that have requested a component to be disabled in its context\r\n        this.disassociatedItemIds = content.disassociatedItemIds || [];\r\n        // items that have requested a component to be enabled in its context\r\n        this.associatedItemIds = content.associatedItemIds || [];\r\n    };\r\n    SNComponent.prototype.handleDeletedContent = function () {\r\n        _super.prototype.handleDeletedContent.call(this);\r\n        this.active = false;\r\n    };\r\n    SNComponent.prototype.structureParams = function () {\r\n        var params = {\r\n            legacy_url: this.legacy_url,\r\n            hosted_url: this.hosted_url,\r\n            local_url: this.local_url,\r\n            valid_until: this.valid_until,\r\n            offlineOnly: this.offlineOnly,\r\n            name: this.name,\r\n            area: this.area,\r\n            package_info: this.package_info,\r\n            permissions: this.permissions,\r\n            active: this.active,\r\n            autoupdateDisabled: this.autoupdateDisabled,\r\n            componentData: this.componentData,\r\n            disassociatedItemIds: this.disassociatedItemIds,\r\n            associatedItemIds: this.associatedItemIds\r\n        };\r\n        var superParams = _super.prototype.structureParams.call(this);\r\n        Object.assign(superParams, params);\r\n        return superParams;\r\n    };\r\n    Object.defineProperty(SNComponent.prototype, \"content_type\", {\r\n        get: function () {\r\n            return 'SN|Component';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SNComponent.prototype.isEditor = function () {\r\n        return this.area == 'editor-editor';\r\n    };\r\n    SNComponent.prototype.isTheme = function () {\r\n        return this.content_type == 'SN|Theme' || this.area == 'themes';\r\n    };\r\n    SNComponent.prototype.isDefaultEditor = function () {\r\n        return this.getAppDataItem('defaultEditor') == true;\r\n    };\r\n    SNComponent.prototype.getAppDataItem = function (arg0) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    SNComponent.prototype.setLastSize = function (size) {\r\n        this.setAppDataItem('lastSize', size);\r\n    };\r\n    SNComponent.prototype.setAppDataItem = function (arg0, size) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    SNComponent.prototype.getLastSize = function () {\r\n        return this.getAppDataItem('lastSize');\r\n    };\r\n    SNComponent.prototype.acceptsThemes = function () {\r\n        if (this.content.package_info &&\r\n            'acceptsThemes' in this.content.package_info) {\r\n            return this.content.package_info.acceptsThemes;\r\n        }\r\n        return true;\r\n    };\r\n    /*\r\n      The key used to look up data that this component may have saved to an item.\r\n      This key will be look up on the item, and not on itself.\r\n     */\r\n    SNComponent.prototype.getClientDataKey = function () {\r\n        if (this.legacy_url) {\r\n            return this.legacy_url;\r\n        }\r\n        else {\r\n            return this.uuid;\r\n        }\r\n    };\r\n    SNComponent.prototype.hasValidHostedUrl = function () {\r\n        return this.hosted_url || this.legacy_url;\r\n    };\r\n    SNComponent.prototype.keysToIgnoreWhenCheckingContentEquality = function () {\r\n        return ['active', 'disassociatedItemIds', 'associatedItemIds'].concat(_super.prototype.keysToIgnoreWhenCheckingContentEquality.call(this));\r\n    };\r\n    /*\r\n      An associative component depends on being explicitly activated for a given item, compared to a dissaciative component,\r\n      which is enabled by default in areas unrelated to a certain item.\r\n     */\r\n    SNComponent.associativeAreas = function () {\r\n        return ['editor-editor'];\r\n    };\r\n    SNComponent.prototype.isAssociative = function () {\r\n        return SNComponent.associativeAreas().includes(this.area);\r\n    };\r\n    SNComponent.prototype.associateWithItem = function (item) {\r\n        this.associatedItemIds.push(item.uuid);\r\n    };\r\n    SNComponent.prototype.isExplicitlyEnabledForItem = function (item) {\r\n        return this.associatedItemIds.indexOf(item.uuid) !== -1;\r\n    };\r\n    SNComponent.prototype.isExplicitlyDisabledForItem = function (item) {\r\n        return this.disassociatedItemIds.indexOf(item.uuid) !== -1;\r\n    };\r\n    return SNComponent;\r\n}(SFItem));\r\nexport { SNComponent };\r\n//# sourceMappingURL=component.js.map","references":["/Users/daj/personal/projects/standard-notes/snjs/node_modules/standard-file-js/lib/app/models/item.js"],"map":"{\"version\":3,\"file\":\"component.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../lib/models/app/component.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/daj/personal/projects/standard-notes/snjs/dist/types/models/app/component.d.ts","writeByteOrderMark":false,"text":"import { SFItem } from 'standard-file-js/lib/app/models/item';\r\nexport declare class SNComponent extends SFItem {\r\n    componentData: any;\r\n    disassociatedItemIds: any;\r\n    associatedItemIds: any;\r\n    legacy_url: any;\r\n    local_url: any;\r\n    hosted_url: any;\r\n    offlineOnly: any;\r\n    valid_until?: Date;\r\n    name: any;\r\n    autoupdateDisabled: any;\r\n    package_info: any;\r\n    area: any;\r\n    permissions: any;\r\n    active: any;\r\n    content: any;\r\n    uuid: any;\r\n    constructor(json_obj: any);\r\n    mapContentToLocalProperties(content: any): void;\r\n    handleDeletedContent(): void;\r\n    structureParams(): any;\r\n    readonly content_type: string;\r\n    isEditor(): boolean;\r\n    isTheme(): boolean;\r\n    isDefaultEditor(): boolean;\r\n    getAppDataItem(arg0: string): any;\r\n    setLastSize(size: any): void;\r\n    setAppDataItem(arg0: string, size: any): void;\r\n    getLastSize(): any;\r\n    acceptsThemes(): any;\r\n    getClientDataKey(): any;\r\n    hasValidHostedUrl(): any;\r\n    keysToIgnoreWhenCheckingContentEquality(): string[];\r\n    static associativeAreas(): string[];\r\n    isAssociative(): boolean;\r\n    associateWithItem(item: any): void;\r\n    isExplicitlyEnabledForItem(item: any): boolean;\r\n    isExplicitlyDisabledForItem(item: any): boolean;\r\n}\r\n"}}
