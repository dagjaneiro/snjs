{"code":"import * as tslib_1 from \"tslib\";\r\nimport _ from 'lodash';\r\nimport { SFItem } from 'standard-file-js/lib/app/models/item';\r\nimport { SNTag } from './tag';\r\nvar SNNote = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SNNote, _super);\r\n    function SNNote(json_obj) {\r\n        var _this = _super.call(this, json_obj) || this;\r\n        if (!_this.text) {\r\n            // Some external editors can't handle a null value for text.\r\n            // Notes created on mobile with no text have a null value for it,\r\n            // so we'll just set a default here.\r\n            _this.text = '';\r\n        }\r\n        if (!_this.tags) {\r\n            _this.tags = [];\r\n        }\r\n        return _this;\r\n    }\r\n    SNNote.prototype.mapContentToLocalProperties = function (content) {\r\n        _super.prototype.mapContentToLocalProperties.call(this, content);\r\n        this.title = content.title;\r\n        this.text = content.text;\r\n    };\r\n    SNNote.prototype.structureParams = function () {\r\n        var params = {\r\n            title: this.title,\r\n            text: this.text\r\n        };\r\n        var superParams = _super.prototype.structureParams.call(this);\r\n        Object.assign(superParams, params);\r\n        return superParams;\r\n    };\r\n    SNNote.prototype.addItemAsRelationship = function (item) {\r\n        /*\r\n        Legacy.\r\n        Previously, note/tag relationships were bidirectional, however in some cases there\r\n        may be broken links such that a note has references to a tag and not vice versa.\r\n        Now, only tags contain references to notes. For old notes that may have references to tags,\r\n        we want to transfer them over to the tag.\r\n         */\r\n        if (item.content_type == 'Tag') {\r\n            item.addItemAsRelationship(this);\r\n        }\r\n        _super.prototype.addItemAsRelationship.call(this, item);\r\n    };\r\n    SNNote.prototype.setIsBeingReferencedBy = function (item) {\r\n        _super.prototype.setIsBeingReferencedBy.call(this, item);\r\n        this.clearSavedTagsString();\r\n    };\r\n    SNNote.prototype.setIsNoLongerBeingReferencedBy = function (item) {\r\n        _super.prototype.setIsNoLongerBeingReferencedBy.call(this, item);\r\n        this.clearSavedTagsString();\r\n    };\r\n    SNNote.prototype.isBeingRemovedLocally = function () {\r\n        var _this = this;\r\n        this.tags.forEach(function (tag) {\r\n            _.remove(tag.notes, { uuid: _this.uuid });\r\n        });\r\n        _super.prototype.isBeingRemovedLocally.call(this);\r\n    };\r\n    SNNote.filterDummyNotes = function (notes) {\r\n        var filtered = notes.filter(function (note) {\r\n            return note.dummy == false || note.dummy == null;\r\n        });\r\n        return filtered;\r\n    };\r\n    SNNote.prototype.informReferencesOfUUIDChange = function (oldUUID, newUUID) {\r\n        _super.prototype.informReferencesOfUUIDChange.call(this);\r\n        for (var _i = 0, _a = this.tags; _i < _a.length; _i++) {\r\n            var tag = _a[_i];\r\n            _.remove(tag.notes, { uuid: oldUUID });\r\n            tag.notes.push(this);\r\n        }\r\n    };\r\n    SNNote.prototype.tagDidFinishSyncing = function (tag) {\r\n        this.clearSavedTagsString();\r\n    };\r\n    SNNote.prototype.safeText = function () {\r\n        return this.text || '';\r\n    };\r\n    SNNote.prototype.safeTitle = function () {\r\n        return this.title || '';\r\n    };\r\n    Object.defineProperty(SNNote.prototype, \"content_type\", {\r\n        get: function () {\r\n            return 'Note';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SNNote.prototype, \"displayName\", {\r\n        get: function () {\r\n            return 'Note';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SNNote.prototype.clearSavedTagsString = function () {\r\n        this.savedTagsString = null;\r\n    };\r\n    SNNote.prototype.tagsString = function () {\r\n        this.savedTagsString = SNTag.arrayToDisplayString(this.tags);\r\n        return this.savedTagsString;\r\n    };\r\n    return SNNote;\r\n}(SFItem));\r\nexport { SNNote };\r\n//# sourceMappingURL=note.js.map","references":["/Users/daj/personal/projects/standard-notes/snjs/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/daj/personal/projects/standard-notes/snjs/node_modules/standard-file-js/lib/app/models/item.js","/Users/daj/personal/projects/standard-notes/snjs/lib/models/app/tag.ts"],"map":"{\"version\":3,\"file\":\"note.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../lib/models/app/note.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/daj/personal/projects/standard-notes/snjs/dist/types/models/app/note.d.ts","writeByteOrderMark":false,"text":"import { SFItem } from 'standard-file-js/lib/app/models/item';\r\nexport declare class SNNote extends SFItem {\r\n    text: any;\r\n    tags: any;\r\n    title: any;\r\n    savedTagsString: any;\r\n    uuid: any;\r\n    constructor(json_obj: any);\r\n    mapContentToLocalProperties(content: any): void;\r\n    structureParams(): any;\r\n    addItemAsRelationship(item: any): void;\r\n    setIsBeingReferencedBy(item: any): void;\r\n    setIsNoLongerBeingReferencedBy(item: any): void;\r\n    isBeingRemovedLocally(): void;\r\n    static filterDummyNotes(notes: any): any;\r\n    informReferencesOfUUIDChange(oldUUID: any, newUUID: any): void;\r\n    tagDidFinishSyncing(tag: any): void;\r\n    safeText(): any;\r\n    safeTitle(): any;\r\n    readonly content_type: string;\r\n    readonly displayName: string;\r\n    clearSavedTagsString(): void;\r\n    tagsString(): any;\r\n}\r\n"}}
