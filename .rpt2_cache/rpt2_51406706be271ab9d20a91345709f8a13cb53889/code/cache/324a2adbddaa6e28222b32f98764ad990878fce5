{"code":"import * as tslib_1 from \"tslib\";\r\nimport find from 'lodash/find';\r\nimport remove from 'lodash/remove';\r\nimport { SFItem } from 'standard-file-js/lib/app/models/item';\r\nvar SNTag = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SNTag, _super);\r\n    function SNTag(json_obj) {\r\n        var _this = _super.call(this, json_obj) || this;\r\n        if (!_this.content_type) {\r\n            _this.content_type = 'Tag';\r\n        }\r\n        if (!_this.notes) {\r\n            _this.notes = [];\r\n        }\r\n        return _this;\r\n    }\r\n    SNTag.prototype.mapContentToLocalProperties = function (content) {\r\n        _super.prototype.mapContentToLocalProperties.call(this, content);\r\n        this.title = content.title;\r\n    };\r\n    SNTag.prototype.structureParams = function () {\r\n        var params = {\r\n            title: this.title\r\n        };\r\n        var superParams = _super.prototype.structureParams.call(this);\r\n        Object.assign(superParams, params);\r\n        return superParams;\r\n    };\r\n    SNTag.prototype.addItemAsRelationship = function (item) {\r\n        if (item.content_type == 'Note') {\r\n            if (!find(this.notes, { uuid: item.uuid })) {\r\n                this.notes.push(item);\r\n                item.tags.push(this);\r\n            }\r\n        }\r\n        _super.prototype.addItemAsRelationship.call(this, item);\r\n    };\r\n    SNTag.prototype.removeItemAsRelationship = function (item) {\r\n        if (item.content_type == 'Note') {\r\n            remove(this.notes, { uuid: item.uuid });\r\n            remove(item.tags, { uuid: this.uuid });\r\n        }\r\n        _super.prototype.removeItemAsRelationship.call(this, item);\r\n    };\r\n    SNTag.prototype.updateLocalRelationships = function () {\r\n        var _this = this;\r\n        var references = this.content.references;\r\n        var uuids = references.map(function (ref) {\r\n            return ref.uuid;\r\n        });\r\n        this.notes.slice().forEach(function (note) {\r\n            if (!uuids.includes(note.uuid)) {\r\n                remove(note.tags, { uuid: _this.uuid });\r\n                remove(_this.notes, { uuid: note.uuid });\r\n                note.setIsNoLongerBeingReferencedBy(_this);\r\n            }\r\n        });\r\n    };\r\n    SNTag.prototype.isBeingRemovedLocally = function () {\r\n        var _this = this;\r\n        this.notes.forEach(function (note) {\r\n            remove(note.tags, { uuid: _this.uuid });\r\n            note.setIsNoLongerBeingReferencedBy(_this);\r\n        });\r\n        this.notes.length = 0;\r\n        _super.prototype.isBeingRemovedLocally.call(this);\r\n    };\r\n    SNTag.prototype.informReferencesOfUUIDChange = function (oldUUID, newUUID) {\r\n        for (var _i = 0, _a = this.notes; _i < _a.length; _i++) {\r\n            var note = _a[_i];\r\n            remove(note.tags, { uuid: oldUUID });\r\n            note.tags.push(this);\r\n        }\r\n    };\r\n    SNTag.prototype.didFinishSyncing = function () {\r\n        for (var _i = 0, _a = this.notes; _i < _a.length; _i++) {\r\n            var note = _a[_i];\r\n            note.tagDidFinishSyncing(this);\r\n        }\r\n    };\r\n    SNTag.prototype.isSmartTag = function () {\r\n        return this.content_type == 'SN|SmartTag';\r\n    };\r\n    Object.defineProperty(SNTag.prototype, \"displayName\", {\r\n        get: function () {\r\n            return 'Tag';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SNTag.arrayToDisplayString = function (tags) {\r\n        return tags\r\n            .sort(function (a, b) {\r\n            return a.title > b.title;\r\n        })\r\n            .map(function (tag, i) {\r\n            return '#' + tag.title;\r\n        })\r\n            .join(' ');\r\n    };\r\n    return SNTag;\r\n}(SFItem));\r\nexport { SNTag };\r\n//# sourceMappingURL=tag.js.map","references":["/Users/daj/personal/projects/standard-notes/snjs/node_modules/@types/lodash/ts3.1/find.d.ts","/Users/daj/personal/projects/standard-notes/snjs/node_modules/@types/lodash/ts3.1/remove.d.ts","/Users/daj/personal/projects/standard-notes/snjs/node_modules/standard-file-js/lib/app/models/item.js"],"map":"{\"version\":3,\"file\":\"tag.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../lib/models/app/tag.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/daj/personal/projects/standard-notes/snjs/dist/types/models/app/tag.d.ts","writeByteOrderMark":false,"text":"import { SFItem } from 'standard-file-js/lib/app/models/item';\r\nexport declare class SNTag extends SFItem {\r\n    content_type: any;\r\n    notes: any;\r\n    title: any;\r\n    uuid: any;\r\n    content: any;\r\n    constructor(json_obj: any);\r\n    mapContentToLocalProperties(content: any): void;\r\n    structureParams(): any;\r\n    addItemAsRelationship(item: any): void;\r\n    removeItemAsRelationship(item: any): void;\r\n    updateLocalRelationships(): void;\r\n    isBeingRemovedLocally(): void;\r\n    informReferencesOfUUIDChange(oldUUID: any, newUUID: any): void;\r\n    didFinishSyncing(): void;\r\n    isSmartTag(): boolean;\r\n    readonly displayName: string;\r\n    static arrayToDisplayString(tags: any): any;\r\n}\r\n"}}
